(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-swiper-swiper"],{"12ff":function(e,t,n){"use strict";var i=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("e814")),o={data:function(){return{swiperList:[]}},onLoad:function(){this.GetSwiperList()},methods:{GetSwiperList:function(){var e=this;uni.request({header:{token:e.MerchantToken.token},url:e.Server+"banner/list",success:function(t){uni.hideLoading(),0==t.data.code?(e.swiperList=t.data.data,console.log(e.swiperList)):101==t.data.code?(uni.showToast({icon:"none",title:"登录超时，将重新授权登录",duration:1e3}),setTimeout(function(){uni.reLaunch({url:"../login/login"})},2e3)):uni.showToast({icon:"none",title:t.data.msg,duration:1e3})}})},ChooseImage:function(e){var t=this;console.log(e);var n=e.currentTarget.dataset.target;console.log(n),uni.chooseImage({count:1,sizeType:["compressed"],success:function(e){uni.showLoading({});e.tempFilePaths,e.tempFiles;uni.getImageInfo({src:e.tempFilePaths[0],success:function(e){var n=e.width,i=e.height,a=new Image;a.src=e.path;var o=document.createElement("canvas"),s=o.getContext("2d");o.width=n,o.height=i,s.drawImage(a,0,0,n,i),o.toBlob(function(e){e.name="name.jpg",console.log(e);URL.createObjectURL(e);var n=new window.File([e],"name.jpg",{type:"image/jpeg"}),i=new XMLHttpRequest;i.open("POST","https://www.qiafantech.com/club/file/img/upload",!0);var a=new FormData;a.append("file",n),i.send(a),i.addEventListener("load",function(e){var n=JSON.parse(e.currentTarget.response);0==n.code?(uni.request({method:"POST",header:{token:t.MerchantToken.token},url:t.Server+"banner/add",data:{url:n.data},success:function(e){uni.hideLoading(),0==e.data.code?t.GetSwiperList():101==e.data.code?(uni.showToast({icon:"none",title:"登录超时，将重新授权登录",duration:1e3}),setTimeout(function(){uni.reLaunch({url:"../login/login"})},2e3)):uni.showToast({icon:"none",title:e.data.msg,duration:1e3})}}),uni.hideLoading()):500==n.code&&(uni.hideLoading(),uni.showToast({icon:"none",title:"上传失败"})),uni.hideLoading()})},"image/jpeg",.2)}})}})},ViewImage:function(){},DelImg:function(e){var t=this;console.log((0,a.default)(t.swiperList[e.currentTarget.dataset.index].id)+1),uni.showModal({content:"确定要删除吗？",cancelText:"取消",confirmText:"确定",success:function(n){n.confirm&&uni.request({header:{token:t.MerchantToken.token},url:t.Server+"banner/del?bannerId="+t.swiperList[e.currentTarget.dataset.index].id,success:function(e){uni.hideLoading(),0==e.data.code?t.GetSwiperList():101==e.data.code?(uni.showToast({icon:"none",title:"登录超时，将重新授权登录",duration:1e3}),setTimeout(function(){uni.reLaunch({url:"../login/login"})},2e3)):uni.showToast({icon:"none",title:e.data.msg,duration:1e3})}})}})}}};t.default=o},"155c":function(e,t,n){"use strict";n.r(t);var i=n("e760"),a=n("5007");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var s=n("2877"),c=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"72aebcda",null);t["default"]=c.exports},5007:function(e,t,n){"use strict";n.r(t);var i=n("12ff"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);t["default"]=a.a},e760:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("cu-custom",{attrs:{bgColor:"bg-black",isBack:!0}},[n("template",{attrs:{slot:"backText"},slot:"backText"},[e._v("返回")]),n("template",{attrs:{slot:"content"},slot:"content"},[e._v("轮播图管理")])],2),n("v-uni-view",{staticClass:"cu-bar  margin-top"},[n("v-uni-view",{staticClass:"action"},[e._v("轮播图")]),n("v-uni-view",{staticClass:"action"},[e._v(e._s(e.swiperList.length)+"/3")])],1),n("v-uni-view",{staticClass:"cu-form-group",staticStyle:{"background-color":"transparent"}},[n("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[e._l(e.swiperList,function(t,i){return n("v-uni-view",{key:i,staticClass:"bg-img",staticStyle:{width:"700upx",height:"300upx"},attrs:{"data-url":e.swiperList[i]},on:{click:function(t){t=e.$handleEvent(t),e.ViewImage(t)}}},[n("v-uni-image",{attrs:{src:t.img_url,mode:"aspectFill"}}),n("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":i},on:{click:function(t){t.stopPropagation(),t=e.$handleEvent(t),e.DelImg(t)}}},[n("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)}),e.swiperList.length<3?n("v-uni-view",{staticClass:"solids",staticStyle:{width:"700upx",height:"300upx"},on:{click:function(t){t=e.$handleEvent(t),e.ChooseImage(t)}}},[n("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):e._e()],2)],1)],1)},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})}}]);