(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0599":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={data:function(){return{MerchantInfo:null,testImg:null,recStaff:[],PageCur:"basics",staffList:null,swiperList:null,page:1,orderList:[],totalPage:0,totalCount:0}},onLoad:function(){var t=this;uni.showLoading({}),this.GetSwiperList(),this.GetOrderList(),this.testImg="https://www.qiafantech.com/club/rq/merchant?scene="+t.MerchantToken.id+"&page=pages%2Fblank%2Fblank&width=430&auto_color=false&line_color=%7B%22r%22%3A0%2C%22g%22%3A0%2C%22b%22%3A0%7D&is_hyaline=false"},onShow:function(){this.GetMerchantInfo(),this.GetStaffList()},onReachBottom:function(){that.page<that.totalPage&&that.page>=3&&(that.page++,that.GetOrderList())},methods:{GetMerchantInfo:function(){var t=this;uni.request({header:{token:t.MerchantToken.token},url:t.Server+"merchant/info",success:function(a){0==a.data.code?(a.data.data.tel=JSON.parse(a.data.data.tel),t.MerchantInfo=a.data.data,console.log(t.MerchantInfo)):101==a.data.code?(uni.showToast({icon:"none",title:"登录超时，将重新授权登录",duration:1e3}),setTimeout(function(){uni.reLaunch({url:"../login/login"})},2e3)):uni.showToast({icon:"none",title:a.data.msg,duration:1e3})}})},ChangeSort:function(t){if(console.log(t),"service_times"==t){console.log(123);for(var a=0;a<this.staffList.length;a++)for(var e=a+1;e<this.staffList.length;e++){var n=this.staffList[a].service_times,i=this.staffList[e].service_times,s=null;n<i&&(s=this.staffList[a],this.staffList[a]=this.staffList[e],this.staffList[e]=s)}}else for(a=0;a<this.staffList.length;a++)for(e=a+1;e<this.staffList.length;e++){n=this.staffList[a].total_gift,i=this.staffList[e].total_gift,s=null;n<i&&(s=this.staffList[a],this.staffList[a]=this.staffList[e],this.staffList[e]=s)}},CancelOrder:function(t){var a=this;a.page=1,a.orderList=[],a.totalPage=0,a.totalCount=0,a.GetOrderList()},GetOrderList:function(){var t=this;uni.request({header:{token:t.MerchantToken.token},url:t.Server+"order/list",data:{page:t.page,size:10},success:function(a){if(uni.hideLoading(),0==a.data.code){for(var e in t.totalPage=a.data.data.totalPage,t.totalCount=a.data.data.totalCount,a.data.data.list)void 0==a.data.data.list[e].project_info||(a.data.data.list[e].project_info=JSON.parse(a.data.data.list[e].project_info)),t.orderList.push(a.data.data.list[e]);for(var e in t.orderList){var n=new Date,i=new Date(t.orderList[e].end_time),s=n.getTime();i=i.getTime(),1==t.orderList[e].is_cancel?t.orderList[e].status=3:0==t.orderList[e].is_cancel&&0==t.orderList[e].is_accept?t.orderList[e].status=0:0==t.orderList[e].is_cancel&&1==t.orderList[e].is_accept&&s<i?t.orderList[e].status=1:0==t.orderList[e].is_cancel&&1==t.orderList[e].is_accept&&s>i&&(t.orderList[e].status=2)}t.page<t.totalPage&&t.page<3&&(t.page++,t.GetOrderList())}else 101==a.data.code?(uni.showToast({icon:"none",title:"登录超时，将重新授权登录",duration:1e3}),setTimeout(function(){uni.reLaunch({url:"../login/login"})},2e3)):uni.showToast({icon:"none",title:a.data.msg,duration:1e3})}})},GetSwiperList:function(){var t=this;uni.request({header:{token:t.MerchantToken.token},url:t.Server+"banner/list",success:function(a){uni.hideLoading(),0==a.data.code?t.swiperList=a.data.data:101==a.data.code?(uni.showToast({icon:"none",title:"登录超时，将重新授权登录",duration:1e3}),setTimeout(function(){uni.reLaunch({url:"../login/login"})},2e3)):uni.showToast({icon:"none",title:a.data.msg,duration:1e3})}})},GetStaffList:function(){var t=this;uni.request({header:{token:t.MerchantToken.token},url:t.Server+"merchant/staffList",success:function(a){0==a.data.code?(t.staffList=a.data.data,void 0!=a.data.data[0]&&void 0!=a.data.data[1]&&void 0!=a.data.data[2]&&(t.recStaff.push(a.data.data[0]),t.recStaff.push(a.data.data[1]),t.recStaff.push(a.data.data[2]))):101==a.data.code?(uni.showToast({icon:"none",title:"登录超时，将重新授权登录",duration:1e3}),setTimeout(function(){uni.reLaunch({url:"../login/login"})},2e3)):uni.showToast({icon:"none",title:a.data.msg,duration:1e3})}})},NavChange:function(t){this.PageCur=t.currentTarget.dataset.cur}}};a.default=n},"1f63":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",["basics"==t.PageCur?e("basics",{attrs:{recStaff:t.recStaff,swiperList:t.swiperList,staffList:t.staffList},on:{ChangeSort:function(a){a=t.$handleEvent(a),t.ChangeSort(a)}}}):t._e(),"component"==t.PageCur?e("components",{attrs:{orderList:t.orderList,totalCount:t.totalCount,totalPage:t.totalPage},on:{CancelOrder:function(a){a=t.$handleEvent(a),t.CancelOrder(a)}}}):t._e(),"plugin"==t.PageCur?e("plugin",{attrs:{MerchantInfo:t.MerchantInfo,testImg:t.testImg}}):t._e(),e("v-uni-view",{staticClass:"cu-bar tabbar bg-white  foot"},[e("v-uni-view",{staticClass:"action",attrs:{"data-cur":"basics"},on:{click:function(a){a=t.$handleEvent(a),t.NavChange(a)}}},[e("v-uni-view",{staticClass:"cuIcon-cu-image"},[e("v-uni-text",{class:"basics"==t.PageCur?"cuIcon-group_fill text-green":"cuIcon-group_fill text-gray"})],1),e("v-uni-view",{class:"basics"==t.PageCur?"text-green":"text-gray"},[t._v("技师管理")])],1),e("v-uni-view",{staticClass:"action",attrs:{"data-cur":"component"},on:{click:function(a){a=t.$handleEvent(a),t.NavChange(a)}}},[e("v-uni-view",{staticClass:"cuIcon-cu-image"},[e("v-uni-text",{class:"component"==t.PageCur?"cuIcon-formfill text-green":"cuIcon-formfill text-gray"})],1),e("v-uni-view",{class:"component"==t.PageCur?"text-green":"text-gray"},[t._v("预约管理")])],1),e("v-uni-view",{staticClass:"action",attrs:{"data-cur":"plugin"},on:{click:function(a){a=t.$handleEvent(a),t.NavChange(a)}}},[e("v-uni-view",{staticClass:"cuIcon-cu-image"},[e("v-uni-text",{class:"plugin"==t.PageCur?"cuIcon-shopfill text-green":"cuIcon-shopfill text-gray"})],1),e("v-uni-view",{class:"plugin"==t.PageCur?"text-green":"text-gray"},[t._v("商户中心")])],1)],1)],1)},i=[];e.d(a,"a",function(){return n}),e.d(a,"b",function(){return i})},a8c2:function(t,a,e){"use strict";e.r(a);var n=e("1f63"),i=e("dfb9");for(var s in i)"default"!==s&&function(t){e.d(a,t,function(){return i[t]})}(s);var o=e("2877"),r=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"58693d88",null);a["default"]=r.exports},dfb9:function(t,a,e){"use strict";e.r(a);var n=e("0599"),i=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);a["default"]=i.a}}]);